window.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.querySelectorAll(".tel"),function(a){function c(a){a.keyCode&&(b=a.keyCode);var c=this.selectionStart;c<3&&a.preventDefault();var d="+7 (___) ___ ____",e=0,f=d.replace(/\D/g,""),g=this.value.replace(/\D/g,""),h=d.replace(/[_\d]/g,function(a){return e<g.length?g.charAt(e++)||f.charAt(e):a});e=h.indexOf("_"),-1!=e&&(e<5&&(e=3),h=h.slice(0,e));var i=d.substr(0,this.value.length).replace(/_+/g,function(a){return"\\d{1,"+a.length+"}"}).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(this.value)||this.value.length<5||b>47&&b<58)&&(this.value=h),"blur"==a.type&&this.value.length<5&&(this.value="")}var b;a.addEventListener("input",c,!1),a.addEventListener("focus",c,!1),a.addEventListener("blur",c,!1),a.addEventListener("keydown",c,!1)})});
